# Neo4j 配置文件 - KAG Knowledge System

# 服务器配置
server.default_listen_address=0.0.0.0
server.default_advertised_address=neo4j

# HTTP 连接器配置
server.http.enabled=true
server.http.listen_address=0.0.0.0:7474
server.http.advertised_address=neo4j:7474

# HTTPS 连接器配置
server.https.enabled=false
server.https.listen_address=0.0.0.0:7473
server.https.advertised_address=neo4j:7473

# Bolt 连接器配置
server.bolt.enabled=true
server.bolt.listen_address=0.0.0.0:7687
server.bolt.advertised_address=neo4j:7687

# 数据存储配置
server.directories.data=/var/lib/neo4j/data
server.directories.logs=/var/lib/neo4j/logs
server.directories.import=/var/lib/neo4j/import
server.directories.plugins=/var/lib/neo4j/plugins

# 内存配置
server.memory.heap.initial_size=1G
server.memory.heap.max_size=2G
server.memory.pagecache.size=1G

# 事务配置
db.transaction.timeout=60s
db.transaction.bookmark_ready_timeout=30s
db.transaction.concurrent.maximum=1000

# 日志配置
server.logs.user.level=INFO
server.logs.debug.level=INFO
server.logs.debug.rotation.keep_number=7
server.logs.debug.rotation.size=20M
server.logs.user.rotation.keep_number=7
server.logs.user.rotation.size=20M
server.logs.gc.enabled=true
server.logs.gc.options=-XX:+UseG1GC -XX:+UseStringDeduplication
server.logs.gc.rotation.keep_number=5
server.logs.gc.rotation.size=20M

# 安全配置
server.security.auth_enabled=false
server.security.procedures.unrestricted=apoc.*,algo.*
server.security.procedures.whitelist=apoc.*,algo.*

# 查询配置
db.query.timeout=10m
db.query.read_timeout=10m
db.query.write_timeout=10m
db.query.schema_timeout=10m
db.query.plan_cache_size=1000
db.query.execution_engine=parallel

# 索引配置
db.index.fulltext.eventually_consistent=true
db.index.fulltext.eventually_consistent_index_population=true

# 网络配置
server.tcp.keep_alive=true
server.tcp.reuse_address=true
server.max_databases=100

# 性能配置
db.checkpoint.interval.time=15m
db.checkpoint.interval.tx=100000
db.checkpoint.iops.limit=300
db.recovery.fail_on_missing_files=true
db.recovery.fail_on_corrupted_log_files=true

# 并发配置
server.panic.shutdown_on_kernel_panic=true
server.shutdown_timeout=120s
server.backup.enabled=true

# 缓存配置
db.cache.memory.ratio=0.65
db.cache.memory.configuration=high_memory

# 连接池配置
server.bolt.connection_keep_alive=true
server.bolt.connection_keep_alive_for_requests=ALL
server.bolt.connection_keep_alive_streaming_scheduling_interval=1m
server.bolt.connection_keep_alive_probes=3
server.bolt.connection_keep_alive_type=ALL

# 监控配置
server.metrics.enabled=true
server.metrics.prometheus.enabled=true
server.metrics.prometheus.endpoint=0.0.0.0:2004
server.metrics.jvm.enabled=true
server.metrics.bolt.messages_enabled=true

# 插件配置
server.unmanaged_extension_classes=n10s.endpoint=/rdf,semantics.extension=/rdf

# 数据库配置
db.read_only=false
db.allow_format_migration=true
db.allow_upgrade=true

# 集群配置（单机模式暂时禁用）
server.cluster.enabled=false 